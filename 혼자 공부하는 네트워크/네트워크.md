# 혼자 공부하는 네트워크

### 네트워크의 기본 구조

= 그래프

: 노드 + 간선(링크, 에지)로 구성

호스트 : 네트워크의 가장자리 노드

- 역할에 따라 구분 : 클라이언트, 서버

네트워크 장비, 통신 매체, 메시지

### 거시적 관점 네트워크

**네트워크의 분류**

1. 범위에 따라
    
    1. LAN : 한정된 공간을 연결하는 통신망
    
    2. WAN : LAN들을 연결한 광역 통신망(ISP 회선)
        
        **ISP : WAN 서비스 제공자(KT, U+, SK)
        

2. 메시지 교환 방식에 따라
    
    1. 회선 교환
        
        : 호스트 간 메시지 교환 전 메시지 전송로(회선)를 설정,
        
        해당 전송로를 통해서만 메시지를 주고받는 네트워크
        
        : 장) 전송되는 정보의 양이 비교적 일정
        
        단) 회선의 이용 효율이 낮아질 수 있어 요즘엔 사용 많이 안 함
        
    
    2. 패킷 교환
        
        : 메시지를 패킷 단위로 쪼개서 송수신하는 네트워크
        
        : 쪼갠 패킷은 수신지에서 재조립
        
        : 회선보다 이용 효율 높음
        
        **패킷 스위치 : 패킷 송수신지 식별하고 패킷 이동 최적 경로 결정
        
        ex) 라우터, 스위치 등
        
        : 패킷(택배) = 헤더(부가/제어정보, 송장) + 페이로드(실질적인 데이터, 물품) + (존재할 경우) 트레일러
        
        ****송수신지 유형별 전송 방식**
        
        1. 유니캐스트 - 하나의 수신지에 전송
        
        2. 브로드캐스트 - 네트워크상 모든 호스트에 전송
        
        3. 멀티캐스트 - 네트워크 내 동일 그룹 호스트에게만 전송
        
        4. 애니캐스트 - 네트워크 내 동일 그룹 가장 가까운 호스트에게 전송

### 미시적 관점 네트워크

프로토콜, 네트워크 참조 모델, 캡슐화와 역캡슐화

**프로토콜**

네트워크에서 올바르게 정보를 교환 - 장비들끼리 언어가 통해야 함

= 노드 간 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법

*** 통신 과정에서 일반적으로는 여러 프로토콜을 사용

**네트워크 참조 모델**

네트워크를 통해 송수신하는 과정

: 정형화된 여러 단계가 있다, 이 단계는 계층적으로 표현 가능하다

통신 과정을 계층적으로 나눈 이유

1. 네트워크 구성과 설계가 용이

2. 네트워크 문제 진단과 해결이 용이

**대표적인 네트워크 참조 모델**

- OSI 모델(7계층)
    
    1. 물리 → 비트 신호 교환 계층
    
    2. 데이터링크 → 네트워크 내 주변 장치간 올바른 정보 교환을 위한 계층
        
        (보통 1, 2계층이 하드웨어적으로 묶임, LAN 관련 기술)
        
    
    3. 네트워크 → 메시지를 수신지까지 전달하는 계층
        
        (LAN간 통신 수행하는 라우팅 등 기술)
        
    
    4. 전송 → 신뢰성, 안정성 있는 전송에 필요한 계층
    
    5. 세션 → 세션(통신 교환 호스트의 응용 프로그램간 연결 상태)을 관리
    
    6. 표현 → 문자를 컴퓨터가 이해할 수 있는 코드로 변환, 압축, 암호화
    
    7. 응용 → 사용자 이용 응용 프로그램에 다양한 네트워크 서비스

- TCP/IP 모델(4계층)
    
    = 인터넷 프로토콜 스위트, TCP/IP 프로토콜 스택
    
    1. 네트워크 엑세스 계층
        
        : 데이터링크 계층과 유사
        
    
    2. 인터넷 계층
        
        : 네트워크 계층과 유사
        
    
    3. 전송 계층
        
        : 전송 계층과 유사
        
    
    4. 응용 계층
        
        : 세션 + 표현 + 응용 계층과 유사
        

**캡슐화, 역캡슐화**

: 송신 과정에서 캡슐화, 수신 과정에서 역캡슐화

- 송신지 입장) 메시지 : 가장 높은 계층 → 가장 낮은 계층 이동

- 수신지 입장) 메시지 : 가장 낮은 계층 → 가장 높은 계층 이동

캡슐화

= 각 계층의 프로토콜에 해당하는 헤더가 송신 과정에서 계속 덧붙는 과정

→ 윗층 (헤더 + 페이로드) = 아랫층 페이로드

역캡슐화

= 캡슐화 과정에서 붙은 헤더를 제거하는 과정

**PDU(Protocol Data Unit)**

: 각 계층에서 송수신되는 메시지의 단위

- 응용, 표현, 세션 → 데이터

- 전송 → 세그먼트(TCP), 데이터그램(UDP)

- 네트워크 → IP 패킷

- 데이터링크 → 프레임

- 물리 → 비트 전송

***** 네트워크 참조 모델은 ‘참조’ 모델**

→ 반드시는 없다

프로토콜과 네트워크 장비가 네트워크를 작동시키는 주체

→ 프로토콜과 네트워크 장비가 학습의 대상

면접, 시험 준비를 위한 네트워크 학습에서는 중요한 개념,

실무 개발을 위한 네트워크 학습에서는 부차적인 개념

**트래픽**

: 네트워크 내의 정보량

→ 주로 노드에서 측정 - 특정 시점에 노드를 경유하는 정보량

과도한 트래픽은 과부하로 인한 성능 저하 유발

**네트워크 성능 지표**

- 처리율(Throughput)
    
    : 단위 시간당 네트워크를 통해 실제로 전송되는 정보량
    
    (bps, Mbps, Gbps, pps)
    

- 대역폭(Bandwidth)
    
    : 신호 처리 영역에서의 정의 → 주파수의 범위
    
    : 컴퓨팅 영역에서의 정의 → 정보를 주고받을 폭
    
    ⇒ 단위시간동안 통신 매체를 통해 송수신할 수 있는 최대 정보량
    

- 패킷 손실(Packet Loss)
    
    : 손실된 패킷 수, 전체 패킷 / 유실된 패킷(백분위) 사용
    

### 물리/데이터링크 계층

**이더넷(Ethernet)**

: LAN 환경에서 가장 대중적으로 사용되는 기술

: 다양한 통신 매체의 규격, 송수신되는 프레임의 형태, 프레임을 주고받는 방법 등이 정의된 기술

1. 물리 계층 관련 이더넷 기술

- 국제 표준으로서의 이더넷
    
    IEEE 802.3 = 이더넷 관련 다양한 표준의 모음
    
    케이블은 “전송속도BASE-추가특성” 방식으로 표기
    
    - 전송 속도 : 숫자만 표기 - Mbps, G가 붙음 - Gbps
    
    - BASE : 베이스밴드, = 변조 타입
    
    - 추가 특성 : 다양한 특성… 통신 매체의 종류
        - C : 동축 / T : 트페 / S : 단파장 광섬유 / L : 장파장 광섬유

- 이더넷은 지금도 발전중
    
    고속 이더넷 : 100Mbps 가량 속도(100BASE-TX)
    
    기가비트 이더넷 : 1Gbps 가량 속도(1000BASE-T)
    
    10기가비트 이더넷 : 10Gbps 가량 속도(10GBASE-T)
    

2. 데이터링크 계층 관련 이더넷 기술

- 이더넷 프레임
    
    : 이더넷 네트워크에서 주고받는 프레임
    
    캡슐화를 거쳐 송신 - 상위 계층 정보 + 헤더 + 트레일러
    
    - 헤더 : 프리앰블, 수신지/송신지 MAC 주소, 타입/길이
    
    - 페이로드 : 데이터
    
    - 트레일러 : FCS
    
    역캡슐화를 거쳐 수신 - 헤더, 트레일러 제거 후 상위 계층으로 올려보냄
    
    - 프리앰블
        
        : 이더넷 프레임의 시작을 알리는 8바이트 정보
        
        : 첫 7바이트는 10101010, 마지막 바이트는 10101011
        
        : 송수신지간 동기화 목적으로 사용됨(실질 정보X)
        
    
    - 수신지/송신지 MAC 주소
        
        : 일반적으로 고유, 변경되지 않음
        
        : MAC 주소는 네트워크 인터페이스마다 부여되는 6바이트 주소
        
        - LAN 내 송수신지 특정
        
        - 일반적으로 NIC 장치가 네트워크 인터페이스 역할
        
        - 한 컴퓨터에 여러 MAC 주소 가능
    
    - 타입/길이
        
        : 명시된 크기가 1500 이하 - 프레임의 크기(길이)
        
        : 명시된 크기가 1536 이상 - 타입(=이더타입)
        
        **타입 : 어떤 정보를 캡슐화했는지, 상위 계층에서 사용한 프로토콜
        
    
    - 데이터
        
        : 최대 크기 1500바이트, 최소 크기 46바이트
        
        (46바이트보다 작으면 크기 맞추기용 패딩이 채워짐(보통 0))
        
    
    - FCS(Frame Check Sequence)
        
        : 오류 검출용 정보, 수신한 정보가 이상이 있는지 확인
        
        → CRC값 검사
        

** 이더넷 외의 기술은?

→ 토큰 링

: 호스트끼리 돌아가며 토큰(정보) 교환

: 다른 호스트에게 메시지 송신하려면 반드시 토큰이 있어야 함

**NIC(Network Interface Controller)**

: 호스트와 통신 매체를 연결, MAC주소가 부여되는 네트워크 장비

→ 케이블은 NIC에 연결되는 물리 계층 유선 통신 매체

: 트위스티드 페어 케이블, 광섬유 케이블

: LAN 카드, 네트워크 카드, 이더넷 카드 등 다양한 명칭으로 불림

: 통신 매체 신호 ↔ 컴퓨터가 이해하는 정보 상호 변환

: MAC주소를 인식

→ 자신과 관련 없는 수신지 MAC주소가 명시된 프레임은 폐기

: NIC마다 지원되는 속도가 다르다

⇒ 네트워크 속도에 영향

- 트위스티드 페어 케이블(Twisted Pair Cable)
    
    : 구리 선으로 전기 신호 송수신
    
    → 구리 선은 노이즈에 민감, 차폐를 위해 실드 사용
    
    STP - 브레이드 실드로 감쌈
    
    FTP - 포일 실드로 감쌈(노이즈 감소)
    
    UTP - 아무것도 안 감쌈(구리 선 자체)
    
    → 카테고리로 분류
    
    카테고리가 높을수록 좋은 성능
    
    : 생김새 = 커넥터 + 케이블 본체
    
    → 커넥터 : RJ-45 주로 사용
    
    → 케이블 본체 : 구리 선이 두 가닥 꼬아짐
    

- 광섬유 케이블
    
    : 빛을 이용하여 속도 빠르고 먼 거리까지 전송 가능
    
    : 노이즈 간섭도 적어 대륙 간 네트워크 연결에 사용
    
    : 생김새 = 커넥터 + 본체(커넥터가 다양함)
    
    : 광섬유 중심에는 코어(실질적으로 빛이 흐르는 부분)
    
    : 코어를 둘러싸는 클래딩(빛이 코어 안에서만 흐르도록 빛을 가둠)
    
    : 광섬유 종류
    
    1. 싱글 모드 광섬유 케이블(SMF)
        
        → 코어 지름이 작아 빛의 이동 경로 하나 이상 갖기 어려움
        
        = 모드가 하나
        
        → 장파장 빛 사용
        
        장) 신호 손실 적음(장거리 적합)
        
        단) 비용 높음
        
    
    2. 멀티 모드 광섬유 케이블(MMF)
        
        → 빛이 여러 경로로 이동 가능
        
        = 모드가 여러 개
        
        → 단파장 빛 사용
        
        장) ?
        
        단) 신호 손실이 클 수 있어 장거리 부적합
        

**물리 계층과 데이터링크 계층 장비**

- 물리 계층에는 주소 개념이 없다
    
    : 단지 통신 매체상 송수신만 이루어짐, 정보 조작이나 판단 없음
    

- 데이터링크 계층에는 있다
    
    : MAC주소, 송수신지 특정 가능, 송수신 정보 조작 가능
    

**허브**

: 물리 계층 대표 장비, 여러 대의 호스트 연결 장치

: 리피터 허브 또는 이더넷 허브

** 허브 전송 특징 이해가 중요

1. 받은 정보는 모든 포트로 내보냄
    
    : 전달받은 신호를 그대로 다시 내보냄
    

2. 반이중(half duplex) 통신
    
    : 송수신을 번갈아 가면서 통신 ex) 1차선 도로, 무전기
    
    ** 전이중 모드 : 송수신을 동시에 양방향으로 통신
    

: 리피터

→ 전기 신호의 감소와 왜곡 방지, 전기 신호 증폭 역할

: 허브의 문제 - 충돌(Collision)

→ 동시에 허브에 신호 송신 ⇒ 충돌 발생

→ 허브에 연결된 모든 호스트는 같은 콜리전 도메인에 속함

** 콜리전 도메인을 줄이기 위한 노력을 해야 함

1. CSMA/CD 사용

2. 다른 장비(스위치) 사용

: CSMA/CD

= Carrier Sense Multiple Access with Collision Detection

1. 캐리어 감지
    
    : 통신 매체의 현재 사용 가능 여부 검사(현재 전송중인가 확인)
    

2. 다중 접근
    
    : 복수의 호스트가 동시에 네트워크 접근 - 충돌 발생
    

3. 충돌 검출
    
    : 전송 중단, 충돌 발생 알리는 잼 신호 전송, 임의 시간 대기 후 재전송
    

**스위치**

→ 전달받은 신호를 수신지 호스트가 연결된 포트로만 내보내고, 전이중 모드로 통신

허브와 달리 특정 MAC 주소를 가진 호스트에만 프레임 전달 가능

전이중 모드 통신 지원으로 CSMA/CD 프로토콜이 필요하지 않음

L2 스위치 - 2계층에서 사용하는 스위치

: 스위치의 주요 기능

1. 스위치의 MAC 주소 학습 기능
    
    : 전달받은 신호를 원하는 포트로만 내보냄, 포트별로 콜리전 도메인이 나눠져 충돌 위험 감소
    
    : 특정 포트와 해당 포트에 연결된 호스트의 MAC 주소와의 관계를 기억
    
    : MAC 주소 학습 → 프레임 내 송신지 MAC 주소 필드 바탕으로 이루어짐
    
    : 학습이 끝나면 스위치는 포트를 필터링, 포워딩
    
    1. 플러딩
        
        : 허브처럼 모든 포트로 프레임 전송
        
    
    2. 에이징
        
        : MAC 주소 테이블에 등록된 포트에서 일정 시간 동안 프레임 못 받으면 해당 항목 삭제
        

2. 스위치의 VLAN 기능
    
    : 논리적으로 LAN을 분리하는 가상의 LAN, VLAN 구성 가능
    

**브리지**

→ 네트워크 영역을 구획하여 콜리전 도메인을 나누거나 네트워크를 확장

앞서 설명한 스위치의 기능들도 제공(일반적으로 스위치 승)

→ 단일 장비로서 브리지는 스위치에 비해 사용 빈도 감소(스위치 기능이 더 다양하고 성능 우수)

→ 개념으로서의 브리지는 자주 등장함

** 스위치의 VLAN 기능

VLAN(Virtual LAN) : 한 대의 스위치로 가상의 LAN을 만드는 방법

→ 한 대의 물리적 스위치를 여러 대의 스위치가 있는 것처럼 논리적인 단위로 LAN 구획

VLAN은 사실상 다른 LAN : 서로 다른 네트워크로 간주, 브로드캐스트 도메인 달라짐

VLAN의 종류

1. 포트 기반 VLAN(post based)
    
    스위치의 포트가 VLAN을 결정하는 방식
    
    특정 포트에 VLAN 할당, 해당 포트에 호스트를 연결하여 VLAN 참여
    
    정적 VLAN
    

2. MAC 기반 VLAN
    
    사전에 설정된 MAC 주소에 따라 VLAN이 결정
    
    송수신하는 프레임 속 MAC 주소가 호스트가 속할 VLAN을 결정하는 방식
    
    동적 VLAN
    

LAN을 넘어 통신하기

3계층은 LAN을 넘어 다른 네트워크와의 통신을 위한 계층

- IP주소를 통한 송수신지 대상을 지정

- 라우팅을 통한 다른 네트워크와 통신
    

데이터 링크 계층의 한계

1. 다른 네트워크까지의 도달 경로를 파악하기 어려움
    
    라우팅 : 패킷이 이동할 최적의 경로를 결정
    
    라우터 : 라우팅을 수행하는 대표적 장비
    

2. MAC 주소만으로는 모든 네트워크에 속한 모든 호스트의 위치를 특정하기 어려움
    
    MAC 주소와 IP 주소는 함께 사용, 기본적으로 IP 주소를 우선 활용
    
    → IP 주소 : 택배 수신지 역할, 논리 주소, 유동적 할당 + 자동으로 할당받거나 사용자가 직접 할
    
    → MAC 주소 : 택배 수신인 역할, 물리 주소, NIC마다 할당되는 고정된 주소
    

### 네트워크 계층의 핵심, 인터넷 프로토콜(IP)

IP의 공식적인 두 기능

1. 주소 지정

2. 단편화

** RFC(Request for Comments) 문서

- 네트워크/인터넷 관련 신기술 제안, 의견 등을 남긴 문서

- 일부 RFC는 오늘날까지 사용되는 인터넷 표준이 됨

- 번호 부여, 가장 정확한 네트워크 이론 지식, 새 문서는 나오지만 폐지되거나 수정되지 않음

**주소 지정**

: IP 주소(v4)를 바탕으로 송수신 대상 지정을 의미

: 4바이트(32비트)로 하나의 주소 표현

: 숫자당 8비트 → 0~255 범위 안에 있는 네 개의 10진수로 표기

: 각 숫자는 점으로 구분, 점으로 구분된 8비트를 옥텟(octet)이라 함

**단편화**

: 전송하고자 하는 패킷의 크기를 MTU 이하의 복수의 패킷으로 나누는 것

** MTU(Maximum Transmission Unit)

= 한 번에 전송 가능한 IP 패킷의 최대 크기

IP 패킷의 헤더도 MTU 크기에 포함, 일반적인 MTU 크기는 1500바이트

IPv4 패킷은 프레임의 페이로드로 데이터 필드에 명시

(페이로드 크기가 46~1500바이트, 넘어가면 단편화가 이루어짐)

IPv4 패킷의 핵심 필드

= 식별자 / 플래그 / 단편화 오프셋 / TTL / 프로토콜 / 송신지 IP 주소 / 수신지 IP 주소

! 단편화는 적게 수행되는 것이 좋다 !

→ 불필요한 트래픽 증가와 대역폭 낭비

→ 쪼개진 IP 패킷들을 합치는 과정에서 발생하는 부하도 성능 저하 요소

**단편화 피하기**

⇒ IP 패킷을 주고받는 모든 노드가 단편화 없이 주고받을 수 있는 최대 크기만큼만 전송해야 함

= 경로 MTU(Path MTU)만큼의 데이터만 전송해야 함

** 경로 MTU 발견(Path MTU Discovery)

: 경로 MTU를 구하고 해당 크기만큼만 송수신하여 IP 단편화를 회피

** 실제로는 단편화가 그렇게 많이 발생하지는 않음

(대부분 DF 비트가 세팅되어 있다)

1. 식별자
    
    → 패킷에 할당된 번호
    
    → 쪼개져서 도착한 IPv4 패킷들이 어떤 메시지에서 쪼개졌는지를 알기 위해 사용
    

2. 플래그 - 3개의 비트로 구성
    
    → 첫 번째 비트는 항상 0(현재 사용되지 않음)
    
    → DF(Don’t Fragment) 비트 : IP 단편화를 수행하지 말라는 표시
    
    - 1이면 IP 단편화 수행 X, 0이면 IP 단편화 가능
    
    → MF(More Fragment) 비트 : 단편화된 패킷이 더 있는지를 표시
    
    - 1이면 쪼개진 패킷이 아직 더 있음, 0이면 이 패킷이 마지막 패킷
    

3. 단편화 오프셋
    
    → 초기 데이터에서 몇 번째로 떨어진 패킷인지를 나타냄
    
    단편화되어 전송되는 패킷들은 수신지에서 순서대로 도착하지 않을 수 있음
    
    수신지가 패킷들을 순서대로 재조합하려면
    
    단편화된 패킷이 초기 데이터에서 몇 번째에 해당하는 패킷인지 알아야 함
    

4. TTL(Time To Live)
    
    → 패킷의 수명, 무의미한 패킷이 네트워크상에 지속적으로 남아있는 것을 방지
    
    → 패킷이 하나의 라우터를 가질 때마다 TTL이 1씩 감소, TTL 값이 0으로 떨어진 패킷은 폐기
    
    → 홉(Hop) : 패킷이 호스트 또는 라우터에 한 번 전달되는 것
    
    (= TTL 필드의 값은 홉마다 1씩 감소)
    

5. 프로토콜
    
    → 상위 계층의 프로토콜이 무엇인지를 나타내는 필드
    
    ex) 전송 계층의 대표적인 프로토콜인 TCP는 6번, UDP는 17번
    

6. 송신지 IP 주소/수신지 IP 주소

**IPv6**

: 이론적으로 할당 가능한 IPv4 주소 개수는 몇 개일까..

→ (2^32개, 약 43억 개) 총 약 43억 개, 충분한가??

→ 언젠가 고갈됨

: IPv6은 16바이트(128비트)로 주소 표현 가능, 콜론으로 구분된 8개 그룹의 16진수 표

→ 이론적으로 할당 가능한 IPv6 주소는 2^128개, 사실상 무한에 가까운 수

** IPv6 v패킷의 핵심 필드

1. 다음 헤더

2. 홉 제한

3. 송신지 IP 주소

4. 수신지 IP 주소

**다음 헤더(next header)**

: 상위 계층의 프로토콜 또는 확장 헤더를 가리키는 필드

→ IPv6는 기본 헤더와 더불어 확장 헤더라는 추가 헤더를 가질 수 있음

→ 확장 헤더는 기본 헤더와 페이로드 데이터 사이에 위치

→ 마치 꼬리에 꼬리를 물듯 또 다른 확장 헤더

: 대표간 확장 헤더

→ 홉 간 옵션(송신지 → 수신지 이르는 모든 경로의 네트워크 장비를 검사)

→ 수신지 옵션(수신지에서만 해당 패킷 검사)

→ 라우팅

→ 단편

→ ESP

**IPv6의 단편화**

: IPv6에는 단편화 확장 헤더를 통해 단편화 달성

: 단편화 확장 헤더에도 다음 헤더 필드가 있음

→ 예약됨과 예약 필드는 0으로 설정되어 사용되지 않음

→ 단편화 오프셋, M 플래그, 식별자 필드

→ M 플래그는 1일 경우 더 단편화된 패킷이 있음을, 0일 경우 마지막 패킷(IPv4의 MF 플래그 필드)

→ 식별자는 동일한 메시지에서부터 단편화된 패킷임을 식별(IPv4 식별자 필드)

### IP 주소로 MAC 주소 알아내기: ARP

**ARP(Address Resolution Protocol)**

: IP 주소를 통해 MAC 주소를 알아내는 프로토콜

→ 동일 네트워크 내 대상의 IP 주소를 통해 MAC 주소를 알아낼 수 있음

: ARP 동작

1. ARP 요청
    
    : 브로드캐스트 메시지 전송 → 모든 호스트가 전달받음
    

2. ARP 응답
    
    : 해당 호스트 이외에는 무시, 해당 호스트는 유니캐스트 메시지로 응답
    

3. ARP 테이블 갱신
    
    : ARP 테이블 : 요청-응답을 통해 알게 된 IP 주소와 MAC 주소의 연관 관계
    
    ARP 테이블 항목은 일정 시간 지나면 삭제, 임의 삭제도 가능
    
    ARP 테이블에 등록된 호스트에 대해선 ARP 요청을 보낼 필요 X
    
    ** ARP 테이블 확인
    
    → 터미널에서 arp -a를 입력
    

** ARP 패킷

: ARP 요청, ARP 응답 과정에서 송수신되는 패킷

- 오퍼레이션 코드(Opcode)
    
    → ARP 요청 : 1, ARP 응답 : 2
    

- 송/수신지 하드웨어 주소(Sender/Target Hardware Address)
    
    → MAC 주소 명시
    

- 송/수신지 프로토콜 주소(Sender/Target Protocol Address)
    
    → IP 주소 명시
    

**서로 다른 네트워크의 경우에는?**

(MAC 주소를 서로 다 모른다고 가정)

1. ARP 요청 - ARP 응답(호스트 A → 라우터 A)
    
    : 라우터 A의 MAC 주소를 알아낸 뒤 라우터 A로 패킷 전송
    

2. ARP 요청 - ARP 응답(라우터 A → 라우터 B)
    
    : 라우터 B의 MAC 주소를 알아낸 뒤 라우터 B로 패킷 전송
    

3. ARP 요청 - ARP 응답(라우터 B → 호스트 B)
    
    : 호스트 B의 MAC 주소를 알아낸 뒤 호스트 B로 패킷 전송
    

4. 호스트 A에서 호스트 B의 MAC 주소 얻음, ARP 테이블 갱신

IP의 핵심 기능, 주소 지정

IP 주소의 구조 : 네트워크 주소, 호스트 주소

- 네트워크 주소 : 네트워크 표현 부분, 호스트가 속한 특정 네트워크 식별

- 호스트 주소 : 호스트 표현 부분, 특정 호스트를 식별

네트워크 주소가 옥텟 1개 → 호스트 주소는 옥텟 3개(24비트)

: 호스트 할당 안 된 다수의 IP 주소 낭비 가능성

네트워크 주소가 옥텟 3개 → 호스트 주소는 옥텟 1개(8비트)

: 호스트가 사용할 IP 주소 부족 우려

⇒ IP 주소의 클래스로 해결

### 클래스풀 주소 체계

클래스

: 네트워크 크기에 따라 IP 주소를 분류하는 기준

: 클래스풀 주소 체계 - 클래스를 기반으로 IP 주소를 관리하는 주소 체계

: 필요한 호스트 IP 개수에 따라 클래스를 달리 선택(네트워크 크기 조정 가능)

A 클래스

: B, C클래스에 비해 할당 가능 호스트 주소 많음

: 네트워크 주소는 비트 0으로 시작(1옥텟) ~ 호스트 주소는 3옥텟

: 이론상 2^7(128개)의 A 클래스 네트워크 존재 가능

: 나타낼 수 있는 IP 주소 범위

→ 최솟값 : 0.0.0.0, 최댓값 : 127.255.255.255

→ 가장 처음 옥텟의 주소가 0~127일 경우 A 클래스 주소임 짐작 가능

B 클래스

: 네트워크 주소는 비트 10으로 시작하는 2옥텟, 호스트 주소도 2옥텟

: 이론상 2^14

: 각 네트워크에 2^16개 호스트 주소 할당 가능

: 나타낼 수 있는 IP 주소 범위

→ 최솟값 : 128.0.0.0

→ 최댓값 : 191.255.255.255

가장 처음 옥텟의 주소가 128~191일 경우 B 클래스 주소임 짐작 가능

C 클래스

: 네트워크 주소는 비트 110으로 시작하는 3옥텟, 호스트 주소는 1옥텟

: 각 네트워크에 2^8개 호스트 주소 할당 가능

: 나타낼 수 있는 IP 주소 범위

→ 최솟값 : 192.0.0.0

→ 최댓값 : 223.255.255.255

가장 처음 옥텟의 주소가 192~223이면 C클래스 주소

호스트의 주소 공간을 모두 사용할 수 있는 것은 아님

호스트 주소가 전부 0인 IP주소

→ 해당 네트워크 자체를 의미하는 네트워크 주소로 사용

호스트 주소가 전부 1인 IP 주소

→ 브로드캐스트 주소로 사용