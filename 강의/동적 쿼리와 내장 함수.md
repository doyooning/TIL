#MySQL 

--------
##### 변수 사용과 동적 쿼리문

1. 변수 선언 및 할당
	`SET @myVar1 = 5;
	`SELECT @myVar1;` 
	SET 으로 변수 선언 및 할당해준다.
	
2. 동적 쿼리문
	`PREPARE myQuery FROM 'SELECT name, height FROM usertbl ORDER BY height LIMIT ?';`
	PREPARE로 쿼리문을 준비시켜놓고
	`EXECUTE myQuery USING @myVar1;`
	EXECUTE로 쿼리문을 실행한다.
	

##### 내장 함수 활용


> [!NOTE] MySQL 내장함수
 --   형 변환 함수
 --   제어흐름 함수
--   문자열 함수
--   수학 함수
--   날짜/시간 함수
--   전체 텍스트 검색 함수
--   보안/압축 함수
--   공간분석 함수
--   정보 함수

###### 1. 데이터형식과 형변환 함수
`cast(표현식 as 데이터형식[길이]), convert(표현식, 데이터형식[길이])`
활용 : 
```
# cast로 반올림한 정수를 표현
select cast(avg(amount) as signed integer) as '평균 구매 개수' 
from buytbl;

# convert로 표현
select convert(avg(amount), signed integer) as '평균 구매 개수'
from buytbl;
```

다양한 구분자를 이용하여 날짜 형식으로 변경  **중요 !**
```
# 오늘 날짜를 시스템에서 받아서 date 타입으로 변경 후 출력
select cast(sysdate() as date) as '오늘날짜';  -- sysdate() = now()
```

###### 2. 제어흐름 함수
: 프로그램의 흐름 제어

```
IF(수식, 참, 거짓) 
	: 수식이 참 또는 거짓인지 결과에 따라 2중 분기
IFNULL(수식1, 수식2) 
	: 수식1이 NULL이 아니면 수식1 반환, 수식1이 NULL이면 수식2 반환
NULLIF(수식1, 수식2) 
	: 수식1과 수식2가 같으면 NULL 반환, 다르면 수식1 반환
CASE ~ WHEN ~ ELSE ~ END 
	: 내장함수는 아님, 연산자로 분류됨, 다중분기 처리
```

###### 3. 문자열 함수
: 문자열을 조작, 활용도 높음

```
ASCII(아스키코드), CHAR(숫자)
BIT_LENGTH(문자열), CHAR_LENGTH(문자열), LENGTH(문자열)
	=> 할당된 BIT 크기 또는 문자 크기를 반환
LENGTH(문자열)
    => 할당된 BYTE수를 반환
MySQL은 기본문자셋으로 UTF-8 코드 사용, 때문에 영문 = 1바이트, 한굴 = 3바이트
CONCAT(), CONCAT_WS() 
	=> 문자열 연결함수
FORMAT(숫자, 소수점자릿수) 
	=> 숫자를 소수점 아래 자릿수까지 표현, 1000단위로 콤마를 표시
BIN(숫자) => 2진수, HEX() => 16진수, OCT() => 8진수
INSERT(기준 문자열, 위치, 길이, 삽입할 문자열)
    => 기준 문자열의 위치부터 길이만큼을 지우고 삽입할 문자열을 끼워 넣는다.
LEFT(문자열, 길이) RIGHT(문자열, 길이) 
	=> 왼쪽 또는 오른쪽
LPAD(문자열, 길이, 채울 문자열), RPAD(문자열, 길이, 채울 문자열)
```

###### 4. 수학 함수
: 수학 계산

```
올림 : CEILING(숫자), 내림 : FLOOR(숫자), 반올림 : ROUND(숫자)
MOD(숫자1, 숫자2) : 숫자1을 숫자2로 나누어 나머지값 반환
POW(숫자1, 숫자2) : 숫자1을 숫자2만큼 거듭제곱
```


